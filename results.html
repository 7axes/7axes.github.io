<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>7 Axes Results</title>
</head>

<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>7 Axes</h1>
<hr>

<h1>Test Results</h1>

<h2>Economic Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
    <div class="bar socialism" id="bar-socialism"><div class="text-wrapper" id="socialism"></div></div>
    <div class="bar laissez" id="bar-laissez"><div class="text-wrapper" id="laissez"></div></div>
</div>

<h2>Cultural Axis: <span class="weight-300" id="cultural-label"></span></h2>
<div class="axis">
    <div class="bar modernism" id="bar-modernism"><div class="text-wrapper" id="modernism"></div></div>
    <div class="bar traditionalism" id="bar-traditionalism"><div class="text-wrapper" id="traditionalism"></div></div>
</div>

<h2>Social Axis: <span class="weight-300" id="social-label"></span></h2>
<div class="axis">
    <div class="bar egalitarianism" id="bar-egalitarianism"><div class="text-wrapper" id="egalitarianism"></div></div>
    <div class="bar hierarchical" id="bar-hierarchical"><div class="text-wrapper" id="hierarchical"></div></div>
</div>

<h2>Moral Axis: <span class="weight-300" id="moral-label"></span></h2>
<div class="axis">
    <div class="bar nihilism" id="bar-nihilism"><div class="text-wrapper" id="nihilism"></div></div>
    <div class="bar objectivism" id="bar-objectivism"><div class="text-wrapper" id="objectivism"></div></div>
</div>

<h2>Biological Axis: <span class="weight-300" id="biological-label"></span></h2>
<div class="axis">
    <div class="bar environmentalism" id="bar-environmentalism"><div class="text-wrapper" id="environmentalism"></div></div>
    <div class="bar hereditarianism" id="bar-hereditarianism"><div class="text-wrapper" id="hereditarianism"></div></div>
</div>

<h2>Causal Axis: <span class="weight-300" id="causal-label"></span></h2>
<div class="axis">
    <div class="bar materialism" id="bar-materialism"><div class="text-wrapper" id="materialism"></div></div>
    <div class="bar romanticism" id="bar-romanticism"><div class="text-wrapper" id="romanticism"></div></div>
</div>

<h2>Historical Axis: <span class="weight-300" id="historical-label"></span></h2>
<div class="axis">
    <div class="bar progressivism" id="bar-progressivism"><div class="text-wrapper" id="progressivism"></div></div>
    <div class="bar cyclicism" id="bar-cyclicism"><div class="text-wrapper" id="cyclicism"></div></div>
</div>

<h2>Closest Ideology: <span class="weight-300" id="ideology-label"></span></h2>
<hr/>
<button class="button" onclick="location.href='index.html';" style="background-color: #900202;">Back</button> <br>

<script>
  function getQV(variable) { // Get Query Variable
    var query = window.location.search.substring(1)
    var vars = query.split("&")
    for (var i=0;i<vars.length;i++) {
      var pair = vars[i].split("=")
      if(pair[0] == variable) {return pair[1]}
    }
    return(NaN);
  }
  
  function setBV(name, value) { // Set Bar Value
    innerel = document.getElementById(name)
    outerel = document.getElementById("bar-" + name)
    outerel.style.width = (value + "%")
    innerel.innerHTML = (value + "%")
    if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
      innerel.style.visibility = "hidden"
    }
  }
  
  econArray = ["Socialist","State Capitalist","Mixed Market","Capitalist","Laissez-Faire"]
  cultArray = ["Modernist","","","","Traditionalist"]
  sociArray = ["Egalitarian","","","","Hierarchical"]
  moraArray = ["Nihilist","","","","Objectivist"]
  biolArray = ["Environmentalist","","","","Hereditarian"]
  causArray = ["Materialist","","","","Romanticist"]
  histArray = ["Progessive","","","","Cyclical"]
  
  function setLabel(val,ary) { // Sets the Label of each Axes based on the above arrays
    if (val > 100) { return "Stop, get some help" } else
    if (val >= 80) { return ary[0] } else
    if (val >= 60) { return ary[1] } else
    if (val >= 40) { return ary[2] } else
    if (val >= 20) { return ary[3] } else
    if (val >= 0) { return ary[4] } else
      { return "Stop, get some help" }
  }
  
  socialism = getQV("e")
  modernism = getQV("cu")
  egalitarianism = getQV("s")
  nihilism = getQV("m")
  environmentalism = getQV("b")
  materialism = getQV("ca")
  progressivism = getQV("h")
  laissez = (100 - socialism).toFixed(1)
  traditionalism = (100 - modernism).toFixed(1)
  hierarchical = (100 - egalitarianism).toFixed(1)
  objectivism = (100 - nihilism).toFixed(1)
  hereditarianism = (100 - environmentalism).toFixed(1)
  romanticism = (100 - materialism).toFixed(1)
  cyclicism = (100 - progressivism).toFixed(1)
  
  setBV("socialism", socialism)
  setBV("laissez", laissez)
  setBV("modernism", modernism)
  setBV("traditionalism", traditionalism)
  setBV("egalitarianism", egalitarianism)
  setBV("hierarchical", hierarchical)
  setBV("nihilism", nihilism)
  setBV("objectivism", objectivism)
  setBV("environmentalism", environmentalism)
  setBV("hereditarianism", hereditarianism)
  setBV("materialism", materialism)
  setBV("romanticism", romanticism)
  setBV("progressivism", progressivism)
  setBV("cyclicism", cyclicism)
  
  document.getElementById("economic-label").innerHTML = setLabel(socialism, econArray)
  document.getElementById("cultural-label").innerHTML = setLabel(modernism, cultArray)
  document.getElementById("social-label").innerHTML = setLabel(egalitarianism, sociArray)
  document.getElementById("moral-label").innerHTML = setLabel(nihilism, moraArray)
  document.getElementById("biological-label").innerHTML = setLabel(environmentalism, biolArray)
  document.getElementById("causal-label").innerHTML = setLabel(materialism, causArray)
  document.getElementById("historical-label").innerHTML = setLabel(progressivism, histArray)
        
  ideology = ""
  ideodist = Infinity
  for (var i = 0; i < ideologies.length; i++) {
    dist = 0
    dist += Math.pow(Math.abs(ideologies[i].stats.econ - socialism), 2)
    dist += Math.pow(Math.abs(ideologies[i].stats.cult - modernism), 2
    dist += Math.pow(Math.abs(ideologies[i].stats.soci - egalitarianism), 2)
    dist += Math.pow(Math.abs(ideologies[i].stats.mora - nihilism), 2)
    dist += Math.pow(Math.abs(ideologies[i].stats.biol - environmentalism), 2)
    dist += Math.pow(Math.abs(ideologies[i].stats.caus - materialism), 2)
    dist += Math.pow(Math.abs(ideologies[i].stats.hist - progressivism), 2)
    if (dist < ideodist) {
          ideology = ideologies[i].name
          ideodist = dist
    }
  }
</script>
</body>
